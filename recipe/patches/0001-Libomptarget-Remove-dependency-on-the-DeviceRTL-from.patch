From 0e93c86ee75c746386bfab04ed23376e9990990c Mon Sep 17 00:00:00 2001
From: Joseph Huber <jhuber6@vols.utk.edu>
Date: Thu, 2 Feb 2023 11:00:00 -0600
Subject: [PATCH 1/2] [Libomptarget] Remove dependency on the DeviceRTL from
 the GPU plugins

From https://reviews.llvm.org/D143196
---
 openmp/libomptarget/plugins-nextgen/amdgpu/CMakeLists.txt | 1 -
 openmp/libomptarget/plugins-nextgen/cuda/CMakeLists.txt   | 1 -
 openmp/libomptarget/plugins/amdgpu/CMakeLists.txt         | 1 -
 openmp/libomptarget/plugins/cuda/CMakeLists.txt           | 1 -
 4 files changed, 4 deletions(-)

diff --git a/openmp/libomptarget/plugins-nextgen/amdgpu/CMakeLists.txt b/openmp/libomptarget/plugins-nextgen/amdgpu/CMakeLists.txt
index b469850297..8f234eebe1 100644
--- a/openmp/libomptarget/plugins-nextgen/amdgpu/CMakeLists.txt
+++ b/openmp/libomptarget/plugins-nextgen/amdgpu/CMakeLists.txt
@@ -90,7 +90,6 @@ add_llvm_library(omptarget.rtl.amdgpu.nextgen SHARED
 
   NO_INSTALL_RPATH
 )
-add_dependencies(omptarget.rtl.amdgpu.nextgen omptarget.devicertl.amdgpu)
 
 target_include_directories(
   omptarget.rtl.amdgpu.nextgen
diff --git a/openmp/libomptarget/plugins-nextgen/cuda/CMakeLists.txt b/openmp/libomptarget/plugins-nextgen/cuda/CMakeLists.txt
index 02cf47b405..da19ec3e7d 100644
--- a/openmp/libomptarget/plugins-nextgen/cuda/CMakeLists.txt
+++ b/openmp/libomptarget/plugins-nextgen/cuda/CMakeLists.txt
@@ -85,7 +85,6 @@ else()
     NO_INSTALL_RPATH
   )
 endif()
-add_dependencies(omptarget.rtl.cuda.nextgen omptarget.devicertl.nvptx)
 
 # Install plugin under the lib destination folder.
 install(TARGETS omptarget.rtl.cuda.nextgen LIBRARY DESTINATION "${OPENMP_INSTALL_LIBDIR}")
diff --git a/openmp/libomptarget/plugins/amdgpu/CMakeLists.txt b/openmp/libomptarget/plugins/amdgpu/CMakeLists.txt
index 4d8f9050fd..1619f1e451 100644
--- a/openmp/libomptarget/plugins/amdgpu/CMakeLists.txt
+++ b/openmp/libomptarget/plugins/amdgpu/CMakeLists.txt
@@ -90,7 +90,6 @@ add_llvm_library(omptarget.rtl.amdgpu SHARED
 
   NO_INSTALL_RPATH
 )
-add_dependencies(omptarget.rtl.amdgpu omptarget.devicertl.amdgpu)
 
 target_include_directories(
   omptarget.rtl.amdgpu
diff --git a/openmp/libomptarget/plugins/cuda/CMakeLists.txt b/openmp/libomptarget/plugins/cuda/CMakeLists.txt
index 520c6b0365..6d0b767cec 100644
--- a/openmp/libomptarget/plugins/cuda/CMakeLists.txt
+++ b/openmp/libomptarget/plugins/cuda/CMakeLists.txt
@@ -82,7 +82,6 @@ else()
     NO_INSTALL_RPATH
   )
 endif()
-add_dependencies(omptarget.rtl.cuda omptarget.devicertl.nvptx)
 
 # Install plugin under the lib destination folder.
 install(TARGETS omptarget.rtl.cuda LIBRARY DESTINATION "${OPENMP_INSTALL_LIBDIR}")
-- 
2.38.1.windows.1

